{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":5,"numPassedTests":7,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":6,"numTotalTests":8,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1766405928843,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":[],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"assigns LOW risk correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405939673,"status":"passed","title":"assigns LOW risk correctly"},{"ancestorTitles":[],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"assigns MEDIUM risk correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405939686,"status":"passed","title":"assigns MEDIUM risk correctly"},{"ancestorTitles":[],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"assigns HIGH risk correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405939688,"status":"passed","title":"assigns HIGH risk correctly"}],"endTime":1766405939691,"message":"","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\scoring.test.ts","startTime":1766405931256,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":507,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reports spam","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405940920,"status":"passed","title":"reports spam"}],"endTime":1766405941429,"message":"","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\spam.test.ts","startTime":1766405931245,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":2308,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"logs in a user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405939857,"status":"passed","title":"logs in a user"}],"endTime":1766405942167,"message":"","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\auth.test.ts","startTime":1766405931216,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":504,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"logs incoming call","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766405942081,"status":"passed","title":"logs incoming call"}],"endTime":1766405942586,"message":"","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\call.intake.test.ts","startTime":1766405931140,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":1468,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"grants and revokes consent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1766405941251,"status":"passed","title":"grants and revokes consent"}],"endTime":1766405942720,"message":"","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\consent.test.ts","startTime":1766405931238,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":6003,"failing":false,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2021","clientVersion":"5.22.0","meta":{"modelName":"CallScore","table":"public.CallScore"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.callScore.create()` invocation in\nC:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\modules\\scoring\\scoring.service.ts:27:26\n\n  24   callAttemptsLast24h: attempts,\n  25 });\n  26 \n→ 27 await prisma.callScore.create(\nThe table `public.CallScore` does not exist in the current database.\n    at $n.handleRequestError (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at scoreCaller (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\modules\\scoring\\scoring.service.ts:27:3)\n    at evaluateCallPolicy (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\modules\\calls\\call.policy.ts:9:17)\n    at Object.<anonymous> (C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\call.policy.test.ts:20:18)"],"fullName":"blocks when spam threshold exceeded and no consent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1766405939719,"status":"failed","title":"blocks when spam threshold exceeded and no consent"}],"endTime":1766405945737,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mblocks when spam threshold exceeded and no consent\u001b[39m\u001b[22m\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.callScore.create()` invocation in\n    C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\modules\\scoring\\scoring.service.ts:27:26\n\n      24   callAttemptsLast24h: attempts,\n      25 });\n      26 \n    → 27 await prisma.callScore.create(\n    The table `public.CallScore` does not exist in the current database.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 25 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mcallScore\u001b[33m.\u001b[39mcreate({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 28 |\u001b[39m     data\u001b[33m:\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 29 |\u001b[39m       callerNumber\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 30 |\u001b[39m       score\u001b[33m:\u001b[39m result\u001b[33m.\u001b[39mscore\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $n.handleRequestError (\u001b[22m\u001b[2mnode_modules/@prisma/client/runtime/library.js\u001b[2m:121:7315)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $n.handleAndLogRequestError (\u001b[22m\u001b[2mnode_modules/@prisma/client/runtime/library.js\u001b[2m:121:6623)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $n.request (\u001b[22m\u001b[2mnode_modules/@prisma/client/runtime/library.js\u001b[2m:121:6307)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat l (\u001b[22m\u001b[2mnode_modules/@prisma/client/runtime/library.js\u001b[2m:130:9633)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat scoreCaller (\u001b[22m\u001b[2msrc/modules/scoring/scoring.service.ts\u001b[2m:27:3)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat evaluateCallPolicy (\u001b[22m\u001b[2msrc/modules/calls/call.policy.ts\u001b[2m:9:17)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/call.policy.test.ts\u001b[39m\u001b[0m\u001b[2m:20:18)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\5907\\Documents\\Projects\\Tsediyalo\\CallTrust\\Backend\\src\\tests\\call.policy.test.ts","startTime":1766405931222,"status":"failed","summary":""}],"wasInterrupted":false}
